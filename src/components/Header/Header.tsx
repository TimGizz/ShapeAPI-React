import { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import style from './style.module.css';
import { useLang } from '../../hooks/useLang';

export function Header() {
  const [Theme, setTheme] = useState<'light' | 'dark'>(
    (localStorage.getItem('theme') as 'light' | 'dark') || 'dark',
  );
  const {lang, setLang} = useLang()

  useEffect(() => {
    localStorage.setItem('lang', lang);
  }, [lang]);

  useEffect(() => {
    localStorage.setItem('theme', Theme);
    document.body.setAttribute('data-theme', Theme);
  }, [Theme]);

  return (
    <header className={style.header}>
      <nav className={style.nav}>
        <div className={style.links}>
          <Link to={'/'} className={style.logo}>
            <svg
              width="136"
              height="31"
              viewBox="0 0 136 31"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M15.0137 4.08398L12.5352 6.07031C11.8789 5.39062 11.2812 4.88672 10.7422 4.55859C10.2148 4.21875 9.44727 4.04883 8.43945 4.04883C7.33789 4.04883 6.44141 4.30078 5.75 4.80469C5.07031 5.29688 4.73047 5.93555 4.73047 6.7207C4.73047 7.40039 5.0293 8.00391 5.62695 8.53125C6.22461 9.04688 7.24414 9.61523 8.68555 10.2363C10.127 10.8457 11.2461 11.4199 12.043 11.959C12.8516 12.4863 13.5137 13.0723 14.0293 13.7168C14.5449 14.3613 14.9258 15.041 15.1719 15.7559C15.4297 16.4707 15.5586 17.2266 15.5586 18.0234C15.5586 19.8867 14.8789 21.4746 13.5195 22.7871C12.1719 24.0996 10.5371 24.7559 8.61523 24.7559C6.74023 24.7559 5.08203 24.2461 3.64062 23.2266C2.21094 22.1953 1.10938 20.6543 0.335938 18.6035L3.39453 17.7422C4.50781 20.2617 6.21289 21.5215 8.50977 21.5215C9.62305 21.5215 10.5488 21.1875 11.2871 20.5195C12.0254 19.8516 12.3945 19.0078 12.3945 17.9883C12.3945 17.3789 12.2012 16.7695 11.8145 16.1602C11.4277 15.5391 10.9473 15.0293 10.373 14.6309C9.79883 14.2324 8.87891 13.7812 7.61328 13.2773C6.35938 12.7617 5.39258 12.293 4.71289 11.8711C4.04492 11.4375 3.46484 10.9277 2.97266 10.3418C2.48047 9.74414 2.11719 9.15234 1.88281 8.56641C1.66016 7.98047 1.54883 7.35352 1.54883 6.68555C1.54883 5.08008 2.19336 3.71484 3.48242 2.58984C4.77148 1.45312 6.33594 0.884766 8.17578 0.884766C9.39453 0.884766 10.6309 1.14844 11.8848 1.67578C13.1387 2.20312 14.1816 3.00586 15.0137 4.08398ZM18.3711 1.18359H21.4297V11.8711C22.2734 10.8984 23.0586 10.1953 23.7852 9.76172C24.5234 9.31641 25.4199 9.09375 26.4746 9.09375C27.7051 9.09375 28.7656 9.56836 29.6562 10.5176C30.5586 11.4551 31.0098 12.5801 31.0098 13.8926V24H27.9512V14.7539C27.9512 13.8398 27.7168 13.1074 27.248 12.5566C26.791 12.0059 26.1816 11.7305 25.4199 11.7305C24.3184 11.7305 23.375 12.1465 22.5898 12.9785C21.8164 13.8105 21.4297 14.8184 21.4297 16.002V24H18.3711V1.18359ZM47.041 9.49805H50.0996V24H47.041V21.1172C45.5527 23.3086 43.707 24.4043 41.5039 24.4043C39.5938 24.4043 37.959 23.6543 36.5996 22.1543C35.252 20.6543 34.5781 18.832 34.5781 16.6875C34.5781 14.6602 35.2578 12.8906 36.6172 11.3789C37.9883 9.85547 39.5938 9.09375 41.4336 9.09375C42.5703 9.09375 43.6484 9.4043 44.668 10.0254C45.6875 10.6465 46.4785 11.4551 47.041 12.4512V9.49805ZM47.4453 16.793C47.4453 15.4688 46.9707 14.3379 46.0215 13.4004C45.0723 12.4512 43.9355 11.9766 42.6113 11.9766C41.3223 11.9766 40.1973 12.4453 39.2363 13.3828C38.2754 14.3203 37.7949 15.4219 37.7949 16.6875C37.7949 18.0586 38.2637 19.2246 39.2012 20.1855C40.1387 21.1465 41.2754 21.627 42.6113 21.627C43.9355 21.627 45.0723 21.1523 46.0215 20.2031C46.9707 19.2422 47.4453 18.1055 47.4453 16.793ZM58.1152 9.49805V12.416C59.5801 10.2012 61.4551 9.09375 63.7402 9.09375C65.6152 9.09375 67.2266 9.84375 68.5742 11.3438C69.9336 12.832 70.6133 14.6133 70.6133 16.6875C70.6133 18.7852 69.9277 20.5957 68.5566 22.1191C67.1855 23.6426 65.5684 24.4043 63.7051 24.4043C62.627 24.4043 61.5898 24.123 60.5938 23.5605C59.6094 22.998 58.7949 22.1836 58.1504 21.1172V30.8027H55.0918V9.49805H58.1152ZM67.4141 16.6875C67.4141 15.4102 66.9336 14.2969 65.9727 13.3477C65.0117 12.3867 63.8809 11.9062 62.5801 11.9062C61.2559 11.9062 60.1074 12.3809 59.1348 13.3301C58.1738 14.2793 57.6934 15.3984 57.6934 16.6875C57.6934 18.0117 58.168 19.1602 59.1172 20.1328C60.0781 21.1055 61.209 21.5918 62.5098 21.5918C63.8574 21.5918 65.0117 21.1113 65.9727 20.1504C66.9336 19.1895 67.4141 18.0352 67.4141 16.6875ZM89.0352 17.3379H76.6602C76.9297 18.8262 77.5391 19.916 78.4883 20.6074C79.4492 21.2871 80.4922 21.627 81.6172 21.627C83.3516 21.627 84.8047 20.9062 85.9766 19.4648L88.209 21.1523C86.5332 23.3203 84.2891 24.4043 81.4766 24.4043C79.3203 24.4043 77.5156 23.666 76.0625 22.1895C74.6094 20.7129 73.8828 18.8789 73.8828 16.6875C73.8828 14.6367 74.6152 12.8613 76.0801 11.3613C77.5566 9.84961 79.3555 9.09375 81.4766 9.09375C83.5625 9.09375 85.3496 9.86133 86.8379 11.3965C88.3262 12.9199 89.0586 14.9004 89.0352 17.3379ZM76.9766 14.8945H85.8359C84.8516 12.9023 83.3984 11.9062 81.4766 11.9062C79.3789 11.9062 77.8789 12.9023 76.9766 14.8945ZM101.199 0.744141L111.781 24H108.582L105.963 18.2695H96.4531L93.9043 24H90.7227L101.199 0.744141ZM101.199 7.75781L97.5957 15.7207H104.803L101.199 7.75781ZM115.332 1.60547H119.832C122.375 1.60547 124.426 2.20312 125.984 3.39844C127.543 4.59375 128.322 6.14648 128.322 8.05664C128.322 9.97852 127.496 11.5898 125.844 12.8906C124.203 14.1914 121.707 14.8242 118.355 14.7891V24H115.332V1.60547ZM118.355 4.27734V12.1172C120.652 12.0938 122.352 11.7715 123.453 11.1504C124.566 10.5176 125.123 9.50977 125.123 8.12695C125.123 7.08398 124.701 6.18164 123.857 5.41992C123.025 4.6582 121.191 4.27734 118.355 4.27734ZM132.576 1.60547H135.6V24H132.576V1.60547Z"
                fill="currentColor"
              />
            </svg>
          </Link>
          <div>
            <Link to={'/auth-api'}>AuthAPI</Link>
            <Link to={'/meme-api'}>MemeAPI</Link>
          </div>
        </div>
        <div className={style.actions}>
          <button onClick={() => setTheme(Theme == 'light' ? 'dark' : 'light')}>
            <svg
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M11.55 16.45C10.9278 15.8278 10.359 15.1764 9.84375 14.4958C9.32847 13.8153 8.85694 13.0958 8.42917 12.3375C8.33194 12.6097 8.26875 12.8868 8.23958 13.1688C8.21042 13.4507 8.19583 13.7278 8.19583 14C8.19583 15.6139 8.75972 16.9847 9.8875 18.1125C11.0153 19.2403 12.3861 19.8042 14 19.8042C14.2722 19.8042 14.5493 19.7847 14.8313 19.7458C15.1132 19.7069 15.3903 19.6486 15.6625 19.5708C14.9042 19.1431 14.1847 18.6715 13.5042 18.1563C12.8236 17.641 12.1722 17.0722 11.55 16.45ZM13.2125 14.8167C14.2042 15.8083 15.3125 16.659 16.5375 17.3688C17.7625 18.0785 19.075 18.6278 20.475 19.0167C19.6972 20.0083 18.7444 20.7813 17.6167 21.3354C16.4889 21.8896 15.2931 22.1667 14.0292 22.1667C11.7542 22.1667 9.82431 21.3743 8.23958 19.7896C6.65486 18.2049 5.8625 16.275 5.8625 14C5.8625 12.7361 6.13958 11.5403 6.69375 10.4125C7.24792 9.28472 8.02083 8.33194 9.0125 7.55417C9.40139 8.95417 9.95069 10.2667 10.6604 11.4917C11.3701 12.7167 12.2208 13.825 13.2125 14.8167ZM21.6708 16.9167C21.2819 16.8194 20.8979 16.7125 20.5188 16.5958C20.1396 16.4792 19.7653 16.3431 19.3958 16.1875C19.5514 15.8375 19.6632 15.4826 19.7313 15.1229C19.7993 14.7632 19.8333 14.3889 19.8333 14C19.8333 12.3861 19.2646 11.0104 18.1271 9.87292C16.9896 8.73542 15.6139 8.16667 14 8.16667C13.6111 8.16667 13.2368 8.20069 12.8771 8.26875C12.5174 8.33681 12.1625 8.44861 11.8125 8.60417C11.6569 8.23472 11.5257 7.86528 11.4188 7.49583C11.3118 7.12639 11.2097 6.74722 11.1125 6.35833C11.5792 6.18333 12.0556 6.05208 12.5417 5.96458C13.0278 5.87708 13.5236 5.83333 14.0292 5.83333C16.3042 5.83333 18.234 6.62569 19.8188 8.21042C21.4035 9.79514 22.1958 11.725 22.1958 14C22.1958 14.5056 22.1521 15.0014 22.0646 15.4875C21.9771 15.9736 21.8458 16.45 21.6708 16.9167ZM12.8333 3.5V0H15.1667V3.5H12.8333ZM12.8333 28V24.5H15.1667V28H12.8333ZM22.2542 7.40833L20.5917 5.74583L23.0708 3.29583L24.7333 4.92917L22.2542 7.40833ZM4.92917 24.7042L3.26667 23.0708L5.74583 20.5917L7.40833 22.2542L4.92917 24.7042ZM24.5 15.1667V12.8333H28V15.1667H24.5ZM0 15.1667V12.8333H3.5V15.1667H0ZM23.0708 24.7333L20.5917 22.2542L22.2542 20.5917L24.7042 23.0708L23.0708 24.7333ZM5.74583 7.40833L3.29583 4.92917L4.92917 3.26667L7.40833 5.74583L5.74583 7.40833Z"
                fill="currentColor"
              />
            </svg>
          </button>
          <button onClick={()=>setLang(lang == 'en'? 'ru': 'en')}>
            <svg
              width="28"
              height="28"
              viewBox="0 0 28 28"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M13.8833 25.6667L19.1916 11.6667H21.6416L26.95 25.6667H24.5L23.2458 22.1083H17.5875L16.3333 25.6667H13.8833ZM4.66663 22.1667L3.03329 20.5333L8.92496 14.6417C8.2444 13.9611 7.62704 13.1833 7.07288 12.3083C6.51871 11.4333 6.00829 10.4417 5.54163 9.33333H7.99163C8.38052 10.0917 8.7694 10.7528 9.15829 11.3167C9.54718 11.8806 10.0138 12.4444 10.5583 13.0083C11.2 12.3667 11.8659 11.4674 12.5562 10.3104C13.2465 9.15347 13.7666 8.05 14.1166 7H1.16663V4.66667H9.33329V2.33333H11.6666V4.66667H19.8333V7H16.45C16.0416 8.4 15.4291 9.83889 14.6125 11.3167C13.7958 12.7944 12.9888 13.9222 12.1916 14.7L14.9916 17.5583L14.1166 19.95L10.5583 16.3042L4.66663 22.1667ZM18.3166 20.0667H22.5166L20.4166 14.1167L18.3166 20.0667Z"
                fill="currentColor"
              />
            </svg>
          </button>
        </div>
      </nav>
    </header>
  );
}
